@if(currentVideo()) {
<div class="video-player-container">
  <video
    #videoElement
    class="video-player"
    [src]="currentVideo().url"
    (timeupdate)="onTimeUpdate()"
    (ended)="nextVideo()"
    (loadedmetadata)="onLoadedMetadata()"
    controls
    preload="metadata"
    playsinline
    crossorigin="anonymous"
  ></video>

  <div class="controls">
    <button
      class="control-button"
      (click)="prevVideo()"
      [disabled]="currentIndex() === 0"
    >
      <span class="icon">⏮</span>
    </button>
    <button
      class="control-button"
      (click)="nextVideo()"
      [disabled]="currentIndex() >= playlist().length - 1"
    >
      <span class="icon">⏭</span>
    </button>
    <button class="control-button stop-button" (click)="toggleVideo()">
      <span class="icon">{{ videoElement.paused ? '⏵' : '⏸' }}</span>
    </button>
    <label class="playback-container" for="playback-range">
      <input
        type="range"
        class="playback-range"
        id="playback-range"
        [min]="range.min"
        [max]="range.max"
        [step]="range.step"
        [value]="playbackSpeed()"
        (input)="setPlaybackSpeed($event)"
      />
      <span class="playback-label">{{ playbackSpeed() }}</span>
    </label>
    <button
      class="control-button fullscreen-button"
      (click)="toggleFullScreen()"
      title="Toggle Fullscreen"
    >
      <span class="icon">⛶</span>
    </button>
  </div>
</div>
} @else {
<p class="no-video">No video selected or playlist is empty.</p>
}
